<div class="jumbotron-fluid">
  <div class="container">
    <h2>Start a new project
      <svg class="icon">
        <use xlink:href="assets/icons.svg#icon-rocket-color"></use>
      </svg>
    </h2>
  </div>
</div>
<section class="container-small m-x-auto m-y-3">
  <form #updateForm="ngForm" (ngSubmit)="storeProject()">
    <div class="form-group">
      <label for="title">Title <span class="text-danger font-weight-bold">*</span></label>
      <input class="form-control" id="title" type="text" required minlength="4" maxlength="20" name="title"
             placeholder="Project title" autocomplete="off"
             [(ngModel)]="project.title" #title="ngModel">

      <div *ngIf="title.errors && (title.dirty || title.touched)">
        <i [hidden]="!title.errors.required">The title is required</i>
        <i [hidden]="!title.errors.minlength">The title must be at least 4 characters long.</i>
        <i [hidden]="!title.errors.maxlength">The title cannot be more than 20 characters long.</i>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description <span class="text-danger font-weight-bold">*</span></label>
      <textarea class="form-control" id="description" required minlength="4" name="description"
                placeholder="Project description"
                [(ngModel)]="project.description" #description="ngModel" rows="6"></textarea>

      <div *ngIf="description.errors && (description.dirty || description.touched)">
        <i [hidden]="!description.errors.required">The Description is required</i>
        <i [hidden]="!description.errors.minlength">The Description must be at least 4 characters long.</i>
      </div>
    </div>

    <fieldset class="form-group p-a-1">
      <legend class="text-xs-center">Positions <span class="text-danger font-weight-bold">*</span></legend>
      <app-autocomplete (onSelect)="onSelect($event)" wrap_class="form-group" label_message="Required skill"
                        label_show="true"></app-autocomplete>
      <div class="form-group">
        <textarea class="form-control m-t-1" type="text" id="position-desc" placeholder="Position description" #position
                  rows="4"></textarea>
      </div>
      <div class="text-xs-right">
        <button class="btn btn-info" type="button" (click)="addPosition(position)">Add Position</button>
      </div>
      <i [hidden]="!positionError">{{positionError}}</i>
    </fieldset>
    <ul class="list-unstyled">
      <li *ngFor="let position of project.position; let i = index" class="panel m-b-1 p-a-1">
        <h5>{{position.name}}
          <button class="btn btn-outline-danger btn-sm pull-xs-right btn-circle-sm font-weight-bold" type="button"
                  (click)="removePosition(i)">&times;</button>
        </h5>
        <p>{{position.description}}</p>
      </li>
    </ul>

    <div class="form-group">
      <label for="question">Questions</label>
      <div class="row">
        <div class="col-md-10">
          <input class="form-control" id="question" type="text" #question
                 placeholder="How much time can you spend on this project?">
        </div>
        <div class="col-md-2">
          <button class="btn btn-info" type="button" (click)="addQuestion(question)">Add</button>
        </div>
        <i [hidden]="!questionError">{{questionError}}</i>
      </div>
    </div>
    <ol>
      <li *ngFor="let question of project.application_questions; let i = index">
        {{question}}
        <button class="btn btn-sm btn-danger" type="button" (click)="removeQuestion(i)">&times;</button>
      </li>
    </ol>
    <hr>
    <div class="text-xs-center">
      <button class="btn btn-primary" type="submit" [disabled]="!updateForm.form.valid || project.position.length < 1">Add project</button>
    </div>
  </form>
</section>
