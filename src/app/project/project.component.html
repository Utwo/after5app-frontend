<div *ngIf="project">
	<div class="jumbotron-fluid">
		<div class="container">
			<h2>{{project.title}}</h2>
			by <a routerLink="/profile/{{project.user_id}}">{{project.user.name}}</a> &sdot;
			<i class="text-muted project__date"> {{ project.created_at | timeAgo}} </i>
		</div>
	</div>
	<article class="container m-y-3">
		<div class="row">
			<section class="col-md-8">
				<div class="m-b-3">
					<h3 class="title-border title-border--green p-b-1">Project description:</h3>
					<p>{{project.description}}</p>
				</div>
				<div *ngIf="project.position.length > 0">
					<h3 class="title-border title-border--green p-b-1">I need help with:</h3>
					<dl *ngFor="let position of project.position">
						<dt class="btn btn-sm btn-info btn-gradient-primary">
							<strong>{{position.skill.name}}</strong>
						</dt>
						<dd>{{position.description}}</dd>
					</dl>
				</div>
			</section>

			<section class="col-md-4">
				<div class="sidebar p-a-2">
					<a class="btn btn-primary btn-block" href="">Help this project become reality</a>
					<a *ngIf="!isFavorite" (click)="addFavorite()" class="btn btn-outline-secondary btn-block">
						<svg class="icon text-danger">
							<use xlink:href="#icon-favorite"></use>
						</svg>
						{{project.favorite_count}}</a>
					<a *ngIf="isFavorite" (click)="addFavorite()" class="btn btn-secondary">
						<svg class="icon text-danger">
							<use xlink:href="#icon-favorite"></use>
						</svg>
						{{project.favorite_count}}</a>
					<hr>
					<div class="text-xs-center">
						<button class="btn btn-outline-primary" (click)="updateProject()">
							<svg class="icon"><use xlink:href="#icon-pencil"></use></svg>
							Edit project</button>

						<button class="btn btn-danger" (click)="deleteProject()">
							<svg class="icon"><use xlink:href="#icon-bin"></use></svg>
							Delete project</button>
					</div>
				</div>
			</section>
		</div>

	</article>

	<div class="container m-y-3">
		<app-comments [project_id]="project.id"></app-comments>
	</div>

	<aside *ngIf="related && related.length > 0" class="m-y-3">
		<div class="container">
			<ul class="row reset-list flex-items-xs-center">
				<li *ngFor="let project of related" class="col-md-4">
					<h4 class="project__title"><a routerLink="/project/{{project.id}}">
						{{project.title}}
					</a></h4>
					<i class="text-muted project__date"> {{ project.created_at | timeAgo}} </i>
					<p>{{project.description | slice:0:40 }}</p>
					<ul class="list-inline text-xs-center" *ngIf="project.position.length > 0">
						<li class="list-inline-item btn btn-sm btn-info btn-gradient-primary project__skill-item"
								*ngFor="let position of project.position">
							{{position.skill.name}}
						</li>
					</ul>
					<br>
					<div class="project__subinfo">
						<img class="profile-img" *ngIf="project.user.picture" src="{{project.user.picture+'?s=20'}}"><a
									routerLink="/profile/{{project.user_id}}">
						{{project.user.name}}</a>
					</div>
				</li>
			</ul>
		</div>
	</aside>
</div>

<div class="modal hidden-xs-up">
	<app-application [project]="project"></app-application>
</div>